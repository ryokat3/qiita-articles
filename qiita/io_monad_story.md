<!--
title:   IOモナドはちゃんと実行しろ、ズルすんじゃねぇ！
tags:    ポエム,FunctionalProgramming,Monad
id:      b255d7d26601fc5a41b4
private: false
-->
IOモナド、うーん、なんすか、これ？副作用がー、とか、Real Worldがー、とか説明されてもさっぱりでした。で、色々考えて、つまりこゆこと、っていうのが、

<font color="red">「IOモナドはちゃんと実行しろ、ズルすんじゃねぇ！」</font>

ってことで、以下ご説明。これを読み終えたらあなたもIOモナドが使いたくなります。

例えば、

**sendMessage("Hello")  /* 送信した文字数を返す */**

とかいうのがあったとして、この sendMessageの役割は、ふたつ、

- 関数として、**「文字列を受け取って、文字列の長さを返す」**
- 副作用として、**「文字列を送信する」**

ええ、当たり前です、普通の人間なら。sendMessageとか言われて、文字数だけ数えて終わり、送信するなんて聞いてないし、ってやつは人間としてどうなの、って思いますよね。

でも、世の中には、そんな常識が通用しない**「純粋君」**（本名、純粋関数君、純粋関数の中で育ったピュアな新卒）があなたの周りにもいるかもしれない。そんな純粋君と上司である**プログラマ（人間）**のある日の仕事ぶりをみてみましょう。

<font color="blue">プログラマ</font>「純粋君、この**"sendMessage"**という関数に**"Hello"**を入れて結果を知らせてくれ。」
<font color="blue">純粋君</font>　「はい、わかりました。よし、やるぞ、えーと、Helloと入れてと、お、結果がでたぞ、でました、**結果は５です！**」
<font color="blue">プログラマ</font>　「うん、よし。また同じ依頼がきた。**"sendMessage"**に**"Hello"**を入れて結果を知らせてくれ。」
<font color="blue">純粋君</font>　「はい、わかりました。えー、またおんなじ。でもさっきやったから結果をしってるもんね。やらなくてもいいよ。**結果は５です！**」
<font color="blue">プログラマ</font>　「速いな純粋君、えらいぞ。また同じ依頼がきた。**"sendMessage"**に**"Hello"**を入れて結果を知らせてくれ。」
<font color="blue">純粋君</font>　「うぜ... **結果は５です！**」

**「同じ関数に同じ引数を入れると同じ結果がでます」**と純粋関数高校の数学の授業で教わった純粋君は、その教えを生かしてうまく仕事をしたのに、結果的に大失敗をやらかしてしまいました。

そこで上司のプログラマさんがIOモナドという便利なものを発明したのは皆様ご存知のとおり。そんなIOモナドにはプログラマさんの悲痛な叫びが込められていたんですね。

<font color="red">「IOモナドはちゃんと実行しろ、ズルすんじゃねぇ！」</font>

純粋君のように関数の実行結果をキャッシュして高速化したりするコンパイラや処理系があるかもしれないので、どんな処理系に対してもこの悲痛な叫びを表現するためプログラマさんはIOモナドを使いましょう。



